(()=>{"use strict";class e{constructor(e,t,s){this.key=e,this.shift=t,this.caps=s}createKey(){const e=document.createElement("div");return e.setAttribute("data-key",this.key.code),"Backspace"===this.key.key?(e.innerHTML="&#8656",e.classList.add("big")):"CapsLock"===this.key.code&&1===this.caps?(e.classList.add("active","big"),e.innerHTML=this.key.key):"ShiftLeft"===this.key.code||"ShiftRight"===this.key.code?(e.innerHTML="Shift","ShiftLeft"===this.key.code&&e.classList.add("big"),this.shift&&e.classList.add("active")):"Delete"===this.key.code||"CapsLock"===this.key.code||"Enter"===this.key.code||"AltLeft"===this.key.code||"AltRight"===this.key.code?(e.classList.add("big"),e.innerHTML=this.key.key):"Control"===this.key.key?(e.classList.add("big"),e.innerHTML="Ctrl"):" "===this.key.key?e.classList.add("space"):"ArrowUp"===this.key.key?e.innerHTML="↑":"ArrowDown"===this.key.key?e.innerHTML="↓":"ArrowLeft"===this.key.key?e.innerHTML="←":"ArrowRight"===this.key.key?e.innerHTML="→":"Meta"===this.key.key?e.innerHTML="Cmd":"Tab"===this.key.code?e.innerHTML="Tab":this.shift===this.caps?1===this.caps?"Key"===this.key.code.substring(0,3)||"Comma"===this.key.code||"Period"===this.key.code||"Period"===this.key.code||"Semicolon"===this.key.code||"Quote"===this.key.code||"Backslash"===this.key.code||"BracketLeft"===this.key.code||"BracketRight"===this.key.code?(e.innerHTML=this.key.key,e.classList.add("low")):(e.innerHTML=this.key.keyCaps,e.classList.add("upp")):(e.classList.add("low"),e.innerHTML=this.key.key):(e.classList.add("upp"),this.caps?"Key"===this.key.code.substring(0,3)||"Comma"===this.key.code||"Period"===this.key.code||"Period"===this.key.code||"Semicolon"===this.key.code||"Quote"===this.key.code||"Backslash"===this.key.code||"BracketLeft"===this.key.code||"BracketRight"===this.key.code?e.innerHTML=this.key.keyCaps:e.innerHTML=this.key.key:e.innerHTML=this.key.keyCaps),e}}class t{constructor(e,t){this.language=localStorage.lang?localStorage.lang:"ru",this.rusKeyboard=t,this.engKeyboard=e,this.capsActive=0,this.shiftActive=0,this.inputPosition=0,this.keyBoard=document.querySelector(".keyboard__controls")}init(){this.keyBoard.innerHTML="",("ru"===this.language?this.rusKeyboard:this.engKeyboard).forEach((t=>{const s=new e(t,this.shiftActive,this.capsActive).createKey();s.classList.add("controls__key","key"),this.keyBoard.append(s)})),this.addHandler()}keyBoardHandlers(){document.addEventListener("keydown",(e=>{e.preventDefault(),document.querySelectorAll(".key").forEach((t=>{e.code===t.getAttribute("data-key")&&t.classList.add("active")})),1===this.shiftActive&&"Control"===e.key&&this.changeLanguage(),"Shift"!==e.key||this.shiftActive?"CapsLock"===e.key?this.capsEvent():"Shift"!==e.key&&"CapsLock"!==e.key&&this.changeInput(e.code):this.shiftEvent()})),document.addEventListener("keyup",(e=>{e.preventDefault(),document.querySelectorAll(".key").forEach((t=>{e.code===t.getAttribute("data-key")&&"CapsLock"!==e.code&&t.classList.remove("active")})),"Shift"===e.key&&this.shiftEvent()}))}addHandler(){document.querySelectorAll(".key").forEach((e=>{e.addEventListener("mousedown",(e=>{"ShiftLeft"===e.target.getAttribute("data-key")||"ShiftRight"===e.target.getAttribute("data-key")?this.shiftEvent():"CapsLock"===e.target.getAttribute("data-key")?this.capsEvent():(e.target.classList.add("active"),this.changeInput(e.target.getAttribute("data-key")))})),e.addEventListener("mouseup",(e=>{"ShiftLeft"===e.target.getAttribute("data-key")||"ShiftRight"===e.target.getAttribute("data-key")?this.shiftEvent():"CapsLock"!==e.target.getAttribute("data-key")&&e.target.classList.remove("active")}))}))}changeLanguage(){"ru"===this.language?(this.language="en",localStorage.setItem("lang","en")):(this.language="ru",localStorage.setItem("lang","ru"))}shiftEvent(){0===this.shiftActive?this.shiftActive=1:this.shiftActive=0,this.init()}capsEvent(){0===this.capsActive?this.capsActive=1:this.capsActive=0,this.init()}changeInput(e){const t=document.querySelector(".keyboard__input");let s,y=t.value;t.selectionEnd=this.inputPosition,("ru"===this.language?this.rusKeyboard:this.engKeyboard).forEach((a=>{a.code===e&&("Backspace"===a.code?(t.value=y.slice(0,this.inputPosition-1)+y.slice(this.inputPosition),this.inputPosition-=1,t.selectionEnd=this.inputPosition):"Delete"===a.code?(t.value=y.slice(0,this.inputPosition)+y.slice(this.inputPosition+1),t.selectionEnd=this.inputPosition):("ArrowUp"===a.code?s="↑":"ArrowDown"===a.code?s="↓":"ArrowLeft"===a.code?s="←":"ArrowRight"===a.code?s="→":"Enter"===a.code?s="\n":"Tab"===a.code?(s="    ",this.inputPosition+=3):"Space"===a.code?s=" ":"ControlLeft"===a.code||"ControlRight"===a.code||"AltLeft"===a.code||"AltRight"===a.code||"MetaLeft"===a.code||"MetaRight"===a.code?(s="",this.inputPosition-=1):s=this.shiftActive!==this.capsActive?this.capsActive?"Key"===e.substring(0,3)||"Comma"===e||"Period"===e||"Period"===e||"Semicolon"===e||"Quote"===e||"Backslash"===e||"BracketLeft"===e||"BracketRight"===e?a.keyCaps:a.key:a.keyCaps:1===this.shiftActive?"Key"===e.substring(0,3)||"Comma"===e||"Period"===e||"Period"===e||"Semicolon"===e||"Quote"===e||"Backslash"===e||"BracketLeft"===e||"BracketRight"===e?a.key:a.keyCaps:a.key,t.value=y.slice(0,this.inputPosition)+s+y.slice(this.inputPosition),this.inputPosition+=1,t.selectionEnd=this.inputPosition))}))}}const s=[{key:">",code:"IntlBackslash",keyCaps:"<"},{key:"1",code:"Digit1",keyCaps:"!"},{key:"2",code:"Digit2",keyCaps:'"'},{key:"3",code:"Digit3",keyCaps:"№"},{key:"4",code:"Digit4",keyCaps:"%"},{key:"5",code:"Digit5",keyCaps:":"},{key:"6",code:"Digit6",keyCaps:","},{key:"7",code:"Digit7",keyCaps:"."},{key:"8",code:"Digit8",keyCaps:";"},{key:"9",code:"Digit9",keyCaps:"("},{key:"0",code:"Digit0",keyCaps:")"},{key:"-",code:"Minus",keyCaps:"_"},{key:"=",code:"Equal",keyCaps:"+"},{key:"Backspace",code:"Backspace",keyCaps:"Backspace"},{key:"Tab",code:"Tab",keyCaps:"Tab"},{key:"й",code:"KeyQ",keyCaps:"Й"},{key:"ц",code:"KeyW",keyCaps:"Ц"},{key:"у",code:"KeyE",keyCaps:"У"},{key:"к",code:"KeyR",keyCaps:"К"},{key:"е",code:"KeyT",keyCaps:"Е"},{key:"н",code:"KeyY",keyCaps:"Н"},{key:"г",code:"KeyU",keyCaps:"Г"},{key:"ш",code:"KeyI",keyCaps:"Ш"},{key:"щ",code:"KeyO",keyCaps:"Щ"},{key:"з",code:"KeyP",keyCaps:"З"},{key:"х",code:"BracketLeft",keyCaps:"Х"},{key:"ъ",code:"BracketRight",keyCaps:"Ъ"},{key:"Delete",code:"Delete"},{key:"CapsLock",code:"CapsLock"},{key:"ф",code:"KeyA",keyCaps:"Ф"},{key:"ы",code:"KeyS",keyCaps:"Ы"},{key:"в",code:"KeyD",keyCaps:"В"},{key:"а",code:"KeyF",keyCaps:"А"},{key:"п",code:"KeyG",keyCaps:"П"},{key:"р",code:"KeyH",keyCaps:"Р"},{key:"о",code:"KeyJ",keyCaps:"О"},{key:"л",code:"KeyK",keyCaps:"Л"},{key:"д",code:"KeyL",keyCaps:"Д"},{key:"ж",code:"Semicolon",keyCaps:"Ж"},{key:"э",code:"Quote",keyCaps:"Э"},{key:"ё",code:"Backslash",keyCaps:"Ё"},{key:"Enter",code:"Enter"},{key:"Shift",code:"ShiftLeft"},{key:"]",code:"Backquote",keyCaps:"["},{key:"я",code:"KeyZ",keyCaps:"Я"},{key:"ч",code:"KeyX",keyCaps:"Ч"},{key:"с",code:"KeyC",keyCaps:"С"},{key:"м",code:"KeyV",keyCaps:"М"},{key:"и",code:"KeyB",keyCaps:"И"},{key:"т",code:"KeyN",keyCaps:"Т"},{key:"ь",code:"KeyM",keyCaps:"Ь"},{key:"б",code:"Comma",keyCaps:"Б"},{key:"ю",code:"Period",keyCaps:"Ю"},{key:"/",code:"Slash",keyCaps:"?"},{key:"ArrowUp",code:"ArrowUp"},{key:"Shift",code:"ShiftRight"},{key:"Control",code:"ControlLeft"},{key:"Alt",code:"AltLeft"},{key:"Meta",code:"MetaLeft",keyCaps:"Meta"},{key:" ",code:"Space"},{key:"Meta",code:"MetaRight",keyCaps:"Meta"},{key:"Alt",code:"AltRight"},{key:"ArrowLeft",code:"ArrowLeft"},{key:"ArrowDown",code:"ArrowDown"},{key:"ArrowRight",code:"ArrowRight"}],y=[{key:"§",code:"IntlBackslash",keyCaps:"±"},{key:"1",code:"Digit1",keyCaps:"!"},{key:"2",code:"Digit2",keyCaps:"@"},{key:"3",code:"Digit3",keyCaps:"#"},{key:"4",code:"Digit4",keyCaps:"$"},{key:"5",code:"Digit5",keyCaps:"%"},{key:"6",code:"Digit6",keyCaps:"^"},{key:"7",code:"Digit7",keyCaps:"&"},{key:"8",code:"Digit8",keyCaps:"*"},{key:"9",code:"Digit9",keyCaps:"("},{key:"0",code:"Digit0",keyCaps:")"},{key:"-",code:"Minus",keyCaps:"_"},{key:"=",code:"Equal",keyCaps:"+"},{key:"Backspace",code:"Backspace",keyCaps:"Backspace"},{key:"Tab",code:"Tab",keyCaps:"Tab"},{key:"q",code:"KeyQ",keyCaps:"Q"},{key:"w",code:"KeyW",keyCaps:"W"},{key:"e",code:"KeyE",keyCaps:"E"},{key:"r",code:"KeyR",keyCaps:"R"},{key:"t",code:"KeyT",keyCaps:"T"},{key:"y",code:"KeyY",keyCaps:"Y"},{key:"u",code:"KeyU",keyCaps:"U"},{key:"i",code:"KeyI",keyCaps:"I"},{key:"o",code:"KeyO",keyCaps:"O"},{key:"p",code:"KeyP",keyCaps:"P"},{key:"[",code:"BracketLeft",keyCaps:"{"},{key:"]",code:"BracketRight",keyCaps:"}"},{key:"Delete",code:"Delete",keyCaps:"Delete"},{key:"CapsLock",code:"CapsLock",keyCaps:"CapsLock"},{key:"a",code:"KeyA",keyCaps:"A"},{key:"s",code:"KeyS",keyCaps:"S"},{key:"d",code:"KeyD",keyCaps:"D"},{key:"f",code:"KeyF",keyCaps:"F"},{key:"g",code:"KeyG",keyCaps:"G"},{key:"h",code:"KeyH",keyCaps:"H"},{key:"j",code:"KeyJ",keyCaps:"J"},{key:"k",code:"KeyK",keyCaps:"K"},{key:"l",code:"KeyL",keyCaps:"L"},{key:";",code:"Semicolon",keyCaps:":"},{key:"'",code:"Quote",keyCaps:'"'},{key:"\\",code:"Backslash",keyCaps:"|"},{key:"Enter",code:"Enter",keyCaps:"Enter"},{key:"Shift",code:"ShiftLeft",keyCaps:"Shift"},{key:"`",code:"Backquote",keyCaps:"~"},{key:"z",code:"KeyZ",keyCaps:"Z"},{key:"x",code:"KeyX",keyCaps:"X"},{key:"c",code:"KeyC",keyCaps:"C"},{key:"v",code:"KeyV",keyCaps:"V"},{key:"b",code:"KeyB",keyCaps:"B"},{key:"n",code:"KeyN",keyCaps:"N"},{key:"m",code:"KeyM",keyCaps:"M"},{key:",",code:"Comma",keyCaps:"<"},{key:".",code:"Period",keyCaps:">"},{key:"/",code:"Slash",keyCaps:"?"},{key:"ArrowUp",code:"ArrowUp",keyCaps:"ArrowUp"},{key:"Shift",code:"ShiftRight",keyCaps:"Shift"},{key:"Control",code:"ControlLeft",keyCaps:"Control"},{key:"Alt",code:"AltLeft",keyCaps:"Alt"},{key:"Meta",code:"MetaLeft",keyCaps:"Meta"},{key:" ",code:"Space",keyCaps:" "},{key:"Meta",code:"MetaRight",keyCaps:"Meta"},{key:"Alt",code:"AltRight",keyCaps:"Alt"},{key:"ArrowLeft",code:"ArrowLeft",keyCaps:"ArrowLeft"},{key:"ArrowDown",code:"ArrowDown",keyCaps:"ArrowDown"},{key:"ArrowRight",code:"ArrowRight",keyCaps:"ArrowRight"}];!async function(){const e=document.createElement("div");e.classList.add("keyboard","wrapper");const a=document.createElement("textarea");a.classList.add("keyboard__input");const i=document.createElement("div");i.classList.add("keyboard__controls");const o=document.createElement("div");o.classList.add("keyboard__info"),o.innerHTML="<h1>Клавиатура создана в операционной системе MacOS </h1>\n\t<h2>Для переключения языка комбинация: <span>Shift+Ctrl</span> </h2>",document.body.appendChild(e),e.appendChild(a),e.appendChild(i),e.appendChild(o),a.addEventListener("click",(()=>{k.inputPosition=a.selectionStart}));const k=new t(y,s);k.init(),k.keyBoardHandlers()}()})();